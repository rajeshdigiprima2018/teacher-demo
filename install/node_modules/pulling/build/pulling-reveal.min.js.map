{"version":3,"file":"pulling-reveal.min.js","sources":["../src/util.ts","../src/pulling.ts","../src/touch.ts","../src/reveal.ts"],"sourcesContent":["export function assertArg(condition: any, message: string) {\n  if (!condition) {\n    throw TypeError(`Invalid arguments: ${message}`);\n  }\n}\n\nexport function polyfill() {\n  Element.prototype.matches = Element.prototype.matches ||\n    // @ts-ignore: Property does not exist\n    Element.prototype.matchesSelector ||\n    // @ts-ignore: Property does not exist\n    Element.prototype.webkitMatchesSelector ||\n    // @ts-ignore: Property does not exist\n    Element.prototype.mozMatchesSelector ||\n    // @ts-ignore: Property does not exist\n    Element.prototype.msMatchesSelector ||\n    // @ts-ignore: Property does not exist\n    Element.prototype.oMatchesSelector;\n\n  Object.entries = /* Object.entries || */ ((obj: any) => {\n    return Object.keys(obj).map(key => [key, obj[key]] as [string, any]);\n  });\n\n  Object.values = /* Object.values || */ ((obj: any) => {\n    return Object.keys(obj).map(key => obj[key]);\n  });\n\n  Object.assign = Object.assign || ((first: any, ...objects: any[]) => {\n    for (const obj of objects) {\n      for (const [key, val] of Object.entries(obj)) {\n        first[key] = val;\n      }\n    }\n\n    return first;\n  });\n\n  Array.prototype.includes = function includes(value) {\n    return this.indexOf(value) !== -1;\n  };\n}\n","import { assertArg } from './util';\n\nconst timingFunctions: timingFunctions[] = [\n  'linear', 'ease', 'ease-in', 'ease-out',\n  'ease-in-out', 'step-start', 'step-end',\n];\n\nexport default abstract class Pulling {\n  static modes: {\n    [key: string]: new (options: Options) => Pulling;\n  } = {};\n\n  static create(options: Options) {\n    const mode = options.mode || Object.keys(Pulling.modes)[0] || 'drawer';\n    if (!Pulling.modes[mode]) {\n      const modes = Object.keys(Pulling.modes).map(x => `\"${x}\"`).join(', ');\n      throw TypeError(`${'`mode`'} must be one of ${modes}`);\n    }\n\n    return new Pulling.modes[mode](options);\n  }\n\n  protected menu: HTMLElement;\n  protected panel: HTMLElement;\n  protected side: sides;\n  protected mode: modes;\n  protected margin: number;\n  protected timing: number;\n  protected timingFunction: timingFunctions;\n  protected width: number;\n  protected sensitivity: number;\n  protected slope: number;\n  protected openPanelClass: string | null;\n\n  protected styles: Styles = {\n    base: {\n      menu: {},\n      panel: {},\n    },\n    open: {\n      menu: {},\n      panel: {},\n    },\n    closed: {\n      menu: {},\n      panel: {},\n    },\n  };\n\n  protected constructor(options: Options) {\n    if (!Object.values(Pulling.modes).some(x => this instanceof x)) {\n      throw TypeError(\n        'Calling this constructor is not allowed. ' +\n        'Use `Pulling.create` instead',\n      );\n    }\n\n    const {\n      menu,\n      panel,\n      side,\n      mode,\n      margin,\n      timing,\n      timingFunction,\n      width,\n      sensitivity,\n      slope,\n      touch,\n      openPanelClass,\n    } = options;\n\n    this.menu = menu;\n    this.panel = panel;\n    this.side = side || 'left';\n    this.mode = mode || 'drawer';\n    this.margin = margin || 25,\n    this.timing = timing || 200;\n    this.timingFunction = timingFunction || 'ease';\n    this.width = width || 256;\n    this.sensitivity = sensitivity || 0.25;\n    this.slope = slope || 0.5;\n    this.openPanelClass = openPanelClass || null;\n\n    assertArg(\n      menu instanceof Element,\n      '`menu` must be of type `Element`',\n    );\n    assertArg(\n      panel instanceof Element,\n      '`panel` must be of type `Element`',\n    );\n    assertArg(\n      this.side === 'left' || this.side === 'right',\n      '`side` must be equal to \"left\" or \"right\"',\n    );\n    assertArg(\n      typeof this.margin === 'number',\n      '`margin` must be of type \"number\"',\n    );\n    assertArg(\n      typeof this.timing === 'number',\n      '`timing` must be of type \"number\"',\n    );\n    assertArg(\n      timingFunctions.includes(this.timingFunction),\n      `${'`timingFunction`'} must be one of ${timingFunctions.map(x => `\"${x}\"`).join(', ')}`,\n    );\n    assertArg(\n      typeof this.width === 'number',\n      '`width` must be of type \"number\"',\n    );\n    assertArg(\n      typeof this.sensitivity === 'number',\n      '`sensitivity` must be of type \"number\"',\n    );\n    assertArg(\n      typeof this.slope === 'number',\n      '`slope` must be of type \"number\"',\n    );\n  }\n\n  protected handlers: {\n    beforeclose: Function[],\n    closed: Function[],\n    beforeopen: Function[],\n    opened: Function[],\n    touchstart: Function[],\n    touchmove: Function[],\n    touchend: Function[],\n  } = {\n    beforeclose: [],\n    closed: [],\n    beforeopen: [],\n    opened: [],\n    touchstart: [],\n    touchmove: [],\n    touchend: [],\n  };\n\n  /** Trigger event listeners for the event */\n  protected emit(eventName: eventNames, e?: Event) {\n    this.handlers[eventName].forEach(handler => handler.call(this, e));\n  }\n\n  /** Add an event handler for the event */\n  on(eventName: eventNames, handler: Function) {\n    this.handlers[eventName].push(handler);\n    return this;\n  }\n\n  /** Remove all event handlers for an event */\n  off(eventName: eventNames, handler?: Function) {\n    if (handler) {\n      this.handlers[eventName] = this.handlers[eventName].filter((handle) => {\n        return handle !== handler;\n      });\n    } else {\n      this.handlers[eventName] = [];\n    }\n    return this;\n  }\n\n  state = {\n    opened: false,\n    opening: false,\n    closed: true,\n    closing: false,\n  };\n\n  /** Open the menu */\n  open(e?: Event) {\n    this.emit('beforeopen', e);\n    if (this.disabled) {\n      return this;\n    }\n\n    if (this.state.opened) {\n      return this;\n    }\n\n    this.state.closed = false;\n    this.state.closing = false;\n    this.state.opening = true;\n    this.state.opened = false;\n\n    if (this.openPanelClass) {\n      document.documentElement.classList.add(this.openPanelClass);\n    }\n\n    const offset = this.offset();\n    if (offset > 0) {\n      const duration = `${this.timing * (1 - offset / this.width)}ms`;\n\n      this.menu.style.transitionDuration = duration;\n      this.panel.style.transitionDuration = duration;\n    }\n\n    Object.assign(this.menu.style, this.styles.open.menu);\n    Object.assign(this.panel.style, this.styles.open.panel);\n\n    const after = () => {\n      this.state.opening = false;\n      this.state.opened = true;\n\n      Object.assign(this.menu.style, this.styles.open.menu);\n      Object.assign(this.panel.style, this.styles.open.panel);\n\n      this.emit('opened');\n    };\n    if (offset === this.width) {\n      after();\n    } else {\n      this.afterTransitionend(after);\n    }\n\n    return this;\n  }\n\n  /** Close the menu */\n  close(e?: Event) {\n    this.emit('beforeclose', e);\n    if (this.disabled) {\n      return this;\n    }\n\n    if (this.state.closed) {\n      this.state.closing = false;\n      return this;\n    }\n\n    this.state.closed = false;\n    this.state.closing = true;\n    this.state.opening = false;\n    this.state.opened = false;\n\n    const offset = this.offset();\n    if (offset > 0) {\n      const duration = `${this.timing * offset / this.width}ms`;\n\n      this.menu.style.transitionDuration = duration;\n      this.panel.style.transitionDuration = duration;\n    }\n\n    Object.assign(this.menu.style, this.styles.closed.menu);\n    Object.assign(this.panel.style, this.styles.closed.panel);\n\n    const after = () => {\n      this.state.closing = false;\n      this.state.closed = true;\n\n      Object.assign(this.menu.style, this.styles.closed.menu);\n      Object.assign(this.panel.style, this.styles.closed.panel);\n\n      if (this.openPanelClass) {\n        document.documentElement.classList.remove(this.openPanelClass);\n      }\n\n      this.emit('closed');\n    };\n    if (offset === 0) {\n      after();\n    } else {\n      this.afterTransitionend(after);\n    }\n\n    return this;\n  }\n\n  toggle(condition: boolean) {\n    if (condition === true) {\n      this.open();\n    } else if (condition === false) {\n      this.close();\n    } else {\n      this.toggle(this.state.closed || this.state.closing);\n    }\n    return this;\n  }\n\n  protected disabled = false;\n\n  /** Disable the menu functionality */\n  disable() {\n    this.disabled = true;\n    return this;\n  }\n\n  /** Enabled to menu functionality */\n  enable() {\n    this.disabled = false;\n    return this;\n  }\n\n  protected afterTransitionend(callback: Function) {}\n\n  /** get offset from the default (closed) position */\n  protected offset() {\n    return 0;\n  }\n}\n","import Pulling from './pulling';\n\nexport default class TouchPulling extends Pulling {\n  constructor(options: Options) {\n    super(options);\n\n    this.touch = options.touch !== false;\n    this.ignoreScrollables = options.ignoreScrollables !== false;\n\n    if (this.touch) {\n      this.addTouchEvents();\n    }\n  }\n  protected touch: boolean;\n  protected ignoreScrollables: boolean;\n\n  protected touched = false;\n\n  /** set offset */\n  protected applyOffset(offset: number) {}\n\n  protected initTouchEvents() {\n    // tslint:disable-next-line no-this-assignment\n    const { width, margin, side, slope, sensitivity, menu, panel } = this;\n\n    const sign = (side === 'left' ? 1 : -1);\n\n    let startClientX = 0;\n    let startClientY = 0;\n\n    let lastClientX = 0;\n\n    let startOffset = 0;\n\n    let prevTime = 0;\n    let lastTime = 0;\n\n    let prevClientX = 0;\n\n    let firstMove = false;\n\n    const scrollable = (elem: HTMLElement | null): boolean => {\n      if (\n        !elem ||\n        elem === document.documentElement ||\n        elem === document.body\n      ) {\n        return false;\n      }\n\n      const { overflowX, overflowY } = getComputedStyle(elem);\n\n      return overflowX === 'auto' ||\n        overflowX === 'scroll' ||\n        (overflowX === 'visible' && overflowY !== 'visible') ||\n        scrollable(elem.parentElement);\n    };\n\n    const onTouchstart = (e: TouchEvent) => {\n      const target = e.target as HTMLElement;\n\n      if (this.ignoreSelector && (target).matches(this.ignoreSelector)) {\n        return;\n      }\n\n      // ignore when the element is scrollable\n      if (this.ignoreScrollables && scrollable(target)) {\n        return;\n      }\n\n      this.emit('touchstart', e);\n      if (this.disabled) {\n        return;\n      }\n\n      this.touched = false;\n      if (e.touches.length !== 1) {\n        return;\n      }\n\n      const { clientX, clientY } = e.touches[0];\n      const offset = this.offset();\n      const region = margin + offset;\n\n      if (side === 'left' && clientX <= region ||\n        side === 'right' && window.innerWidth - clientX <= region) {\n        this.touched = true;\n\n        startClientX = clientX;\n        startClientY = clientY;\n\n        lastClientX = clientX;\n\n        startOffset = offset;\n\n        lastTime = Date.now();\n\n        firstMove = true;\n      }\n    };\n\n    const onTouchmove = (e: TouchEvent) => {\n      this.emit('touchmove', e);\n\n      if (this.disabled || !this.touched) {\n        return;\n      }\n\n      const { clientX, clientY } = e.touches[0];\n      const diffX = (clientX - startClientX) * sign;\n\n      if (Math.abs(diffX) < 10) {\n        return;\n      }\n\n      if (firstMove) {\n        const diffY = clientY - startClientY;\n        const currentSlope = Math.abs(diffY / diffX);\n        if (currentSlope > slope) {\n          this.touched = false;\n          return;\n        }\n\n        if (this.state.closed && diffX > 0) {\n          this.emit('beforeopen');\n        } else if (this.state.opened) {\n          this.emit('beforeopen');\n        }\n\n        menu.style.transition = '';\n        panel.style.transition = '';\n      }\n\n      if (this.state.opened && diffX > 0 || this.state.closed && diffX < 0) {\n        lastClientX = clientX;\n        lastTime = Date.now();\n\n        return;\n      }\n\n      this.state.opened = false;\n      this.state.closed = false;\n\n      const dx = (clientX - lastClientX) * sign;\n\n      const opening = dx > 0;\n      this.state.opening = opening;\n      this.state.closing = !opening;\n\n      const offset = Math.min(Math.max(0, startOffset + diffX), width);\n      this.applyOffset(offset);\n\n      prevClientX = lastClientX;\n      lastClientX = clientX;\n\n      prevTime = lastTime;\n      lastTime = Date.now();\n      firstMove = false;\n    };\n\n    const onTouchend = (e: TouchEvent) => {\n      if (!this.touched) {\n        return;\n      }\n\n      this.touched = false;\n      if (firstMove) {\n        return;\n      }\n\n      this.emit('touchend', e);\n\n      Object.assign(this.panel.style, this.styles.base.panel);\n      Object.assign(this.menu.style, this.styles.base.menu);\n\n      const offset = this.offset();\n      const { clientX } = e.changedTouches[0];\n\n      let x1;\n      let t1;\n\n      if (clientX === lastClientX) {\n        x1 = prevClientX;\n        t1 = prevTime;\n      } else {\n        x1 = lastClientX;\n        t1 = lastTime;\n      }\n\n      const x2 = clientX;\n      const t2 = Date.now();\n\n      const speed = (x2 - x1) / (t2 - t1) * sign;\n\n      if (\n        offset > width / 2 &&\n        speed > -sensitivity ||\n        speed > sensitivity\n      ) {\n        this.open(e);\n      } else {\n        this.close(e);\n      }\n    };\n\n    return {\n      onTouchstart,\n      onTouchmove,\n      onTouchend,\n    };\n  }\n  protected touchEvents: {\n    onTouchstart(e: TouchEvent): void,\n    onTouchmove(e: TouchEvent): void,\n    onTouchend(e: TouchEvent): void,\n  };\n  protected addTouchEvents() {\n    if (!this.touchEvents) {\n      this.touchEvents = this.initTouchEvents();\n    }\n    document.documentElement.addEventListener('touchstart', this.touchEvents.onTouchstart, false);\n    document.documentElement.addEventListener('touchmove', this.touchEvents.onTouchmove, false);\n    document.documentElement.addEventListener('touchend', this.touchEvents.onTouchend, false);\n  }\n  protected removeTouchEvents() {\n    document.documentElement.removeEventListener('touchstart', this.touchEvents.onTouchstart);\n    document.documentElement.removeEventListener('touchmove', this.touchEvents.onTouchmove);\n    document.documentElement.removeEventListener('touchend', this.touchEvents.onTouchend);\n  }\n\n  protected ignores: string[] = [];\n  protected ignoreSelector: string = '';\n\n  /** Ignore touch events from elements matching a given selector */\n  ignore(selector: string) {\n    this.ignores.push(selector);\n    this.ignoreSelector = this.ignores.join(', ');\n    return this;\n  }\n  /**\n   * Remove selector from ignore list\n   * _Does not_ override `ignore`\n   */\n  unignore(selector: string) {\n    this.ignores = this.ignores.filter(s => s !== selector);\n    this.ignoreSelector = this.ignores.join(', ');\n    return this;\n  }\n\n  /** enable touch functionality */\n  enableTouch() {\n    if (!this.touch) {\n      this.addTouchEvents();\n      this.touch = true;\n    }\n    return this;\n  }\n\n  /** disable touch functionality */\n  disableTouch() {\n    if (this.touch) {\n      this.removeTouchEvents();\n      this.touch = false;\n    }\n    return this;\n  }\n}\n","import TouchPulling from './touch';\n\nexport default class Reveal extends TouchPulling {\n  constructor(options: Options) {\n    super(options);\n\n    this.styles.base.menu = {\n      overflowX: 'hidden',\n      overflowY: 'auto',\n\n      position: 'fixed',\n      [this.side]: '0',\n      top: '0',\n      bottom: '0',\n      width: `${this.width}px`,\n    };\n    this.styles.base.panel = {\n      transition: `transform ${this.timing}ms ${this.timingFunction}`,\n    };\n    this.styles.open.panel = {\n      transform: `translateX(${this.side === 'right' ? '-' : ''}${this.width}px)`,\n    };\n    this.styles.closed.panel = {\n      transform: `translateX(0)`,\n    };\n\n    Object.assign(this.menu.style, this.styles.base.menu, this.styles.closed.menu);\n    Object.assign(this.panel.style, this.styles.base.panel, this.styles.closed.panel);\n\n    this.initTransitionend();\n  }\n\n  protected offset() {\n    const panelPos = this.panel.getBoundingClientRect();\n    return Math.abs(panelPos.left);\n  }\n\n  protected applyOffset(offset: number) {\n    const sign = (this.side === 'left' ? 1 : -1);\n    this.panel.style.transform = `translateX(${offset * sign}px)`;\n  }\n\n  private onTransitionend: Function | null;\n\n  protected afterTransitionend(callback: Function) {\n    this.onTransitionend = callback;\n  }\n\n  private initTransitionend() {\n    this.panel.addEventListener('transitionend', () => {\n      if (this.onTransitionend) {\n        this.onTransitionend();\n      }\n\n      this.onTransitionend = null;\n    }, false);\n  }\n}\n\nTouchPulling.modes['reveal'] = Reveal;\n"],"names":["condition","message","TypeError","timingFunctions","Pulling","options","mode","Object","keys","modes","map","x","join","eventName","e","this","handlers","forEach","handler","call","_this","push","filter","handle","emit","disabled","state","opened","closed","closing","opening","openPanelClass","document","documentElement","classList","add","offset","duration","timing","width","menu","style","transitionDuration","panel","assign","styles","open","after","afterTransitionend","remove","close","toggle","callback","base","beforeclose","beforeopen","touchstart","touchmove","touchend","values","some","side","margin","timingFunction","sensitivity","slope","assertArg","Element","includes","__extends","TouchPulling","_a","sign","startClientX","startClientY","lastClientX","startOffset","prevTime","lastTime","prevClientX","firstMove","scrollable","elem","body","overflowX","overflowY","parentElement","onTouchstart","clientX","region","target","ignoreSelector","matches","ignoreScrollables","touched","touches","length","clientY","window","innerWidth","Date","now","onTouchmove","diffX","Math","abs","currentSlope","transition","min","max","applyOffset","onTouchend","x1","speed","t1","touchEvents","initTouchEvents","addEventListener","removeEventListener","selector","ignores","s","touch","addTouchEvents","removeTouchEvents","_super","Reveal","panelPos","getBoundingClientRect","left","transform","onTransitionend","position","initTransitionend","prototype","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","entries","obj","key","first","_i","objects","objects_1","_c","_b","_d","val","Array","value","indexOf"],"mappings":"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"}